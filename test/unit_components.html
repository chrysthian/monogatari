<!DOCTYPE html>
<html>
<head>
<title>Component Unit Test</title>
<script src="../lib/Require.js"></script>
<script src="setup.js"></script>
<link rel="stylesheet" type="text/css" href="style.css" />
<script>

  require( [ 'component/Node' ], function( _Node ) {
    var n = new _Node();
    assert( n != null, 'Node created', n );
    assert( n.getEulerRotation() === 0, 'Node getEulerRotation');
  } );

  require( [ 'component/Audio' ], function( _Audio ) {
    var audio = new _Audio( 'myid', 'assets/heat-on-the-road.ogg' );
    assert( audio != null, 'Audio created', audio );

    var frames = 0;

    var run = function() {
      if( frames == 100 ) {
        assert( audio.isLoaded(), 'Audio isLoaded' );
        if( audio.isLoaded() ) {
          audio.start();
        }
      }

      if( frames > 100 ) {
        assert( audio.state == _Audio.STATE_PLAYING, 'Audio state playing', audio );
        audio.stop();
        assert( audio.state == _Audio.STATE_STOPPED, 'Audio state stopped', audio );
      } else {
        frames++;
        requestAnimationFrame( run );
      }
    }

    run();
  } );

  require( [ 'component/Sprite' ], function( _Sprite ) {
    var sprite = new _Sprite( 'mainScene', 'assets/zombies.png', 64, 64, 1, 3 );
    assert( sprite != null, 'Sprite created', sprite );

  } );

  require( [ 'component/StaticText' ], function ( _StaticText ) {
    var text = new _StaticText( 'mainScene', 'OROMIO', 12, "Caesar Dressing" );
    assert( test != null, 'StaticText created', text );

    text.load();
  } );

</script>
</head>
<body>
<div id="test">
</div>
</body>
</html>
