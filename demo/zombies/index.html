<!DOCTYPE html>
<html>
<head>
<title>Zombies</title>
<style type="text/css">
body {
	margin: 0;
	padding: 0;
	overflow: hidden;
}
</style>
<script type="text/javascript" src="../../dist/monogatari-0.1.0-dev.js"></script>
<script>
  require( [ 'Monogatari' ], function( m ) {

    m.init( "#000" );

    require( [ 'go/single/Hero', 'buffer/Bullets', 'buffer/Zombies', 'util/Collider' ], function( Hero, Bullets, Zombies, Collider ) {

      var score = 0;
      var gameOver = false;      

      m.world.update = function() {       
        if ( !gameOver ) {
          Zombies.spawn();
          score = Collider.checkCollisions( score );

          if ( Hero.dead ) {
            gameOver = true;            
            Zombies.clear();
            alert( 'You died!\nKilling ' + score + ' zombies' );           
          }
        }
      };

      m.run();

    } );
  } );
</script>
</head>
<body>
</body>
</html>
