<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>Source: component/RigidBody.js | Monogatari Docs</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Modules</h3><ul><li><a href="module-collection_LinkedList.html">collection/LinkedList</a></li><li><a href="module-collection_List.html">collection/List</a></li><li><a href="module-collection_Map.html">collection/Map</a></li><li><a href="module-collection_Tree.html">collection/Tree</a></li><li><a href="module-component_Audio.html">component/Audio</a></li><li><a href="module-component_Base.html">component/Base</a></li><li><a href="module-component_RigidBody.html">component/RigidBody</a></li><li><a href="module-component_Sprite.html">component/Sprite</a></li><li><a href="module-core_Common.html">core/Common</a></li><li><a href="module-core_GameObject.html">core/GameObject</a></li><li><a href="module-core_Math.html">core/Math</a></li><li><a href="module-core_Message.html">core/Message</a></li><li><a href="module-core_Timer.html">core/Timer</a></li><li><a href="module-core_World.html">core/World</a></li><li><a href="module-input_Keyboard.html">input/Keyboard</a></li><li><a href="module-input_Mouse.html">input/Mouse</a></li><li><a href="module-manager_MessageManager.html">manager/MessageManager</a></li><li><a href="module-manager_PhysicsManager.html">manager/PhysicsManager</a></li><li><a href="module-manager_SceneManager.html">manager/SceneManager</a></li><li><a href="module-Monogatari.html">Monogatari</a></li><li><a href="module-render_Camera2D.html">render/Camera2D</a></li><li><a href="module-render_Context2D.html">render/Context2D</a></li><li><a href="module-util_ArrayUtils.html">util/ArrayUtils</a></li><li><a href="module-util_CommonUtils.html">util/CommonUtils</a></li><li><a href="module-util_StringUtils.html">util/StringUtils</a></li></ul><h3>Classes</h3><ul><li><a href="module-collection_LinkedList-LinkedList.html">LinkedList</a></li><li><a href="module-collection_List-List.html">List</a></li><li><a href="module-collection_Map-Map.html">Map</a></li><li><a href="module-collection_Tree-Tree.html">Tree</a></li><li><a href="module-collection_Tree-TreeNode.html">TreeNode</a></li><li><a href="module-core_Common-Common.html">Common</a></li><li><a href="module-core_GameObject-GameObject.html">GameObject</a></li><li><a href="module-core_Message-Message.html">Message</a></li><li><a href="module-core_Timer-Timer.html">Timer</a></li><li><a href="module-input_Keyboard-Keyboard.html">Keyboard</a></li><li><a href="module-input_Mouse-Mouse.html">Mouse</a></li><li><a href="module-manager_MessageManager-MessageManager.html">MessageManager</a></li><li><a href="module-manager_PhysicsManager-PhysicsManager.html">PhysicsManager</a></li><li><a href="module-manager_SceneManager-SceneManager.html">SceneManager</a></li><li><a href="module-Monogatari-Monogatari.html">Monogatari</a></li><li><a href="module-render_Camera2D-Camera2D.html">Camera2D</a></li><li><a href="module-render_Context2D-Context2D.html">Context2D</a></li><li><a href="module-util_ArrayUtils-ArrayUtils.html">ArrayUtils</a></li><li><a href="module-util_CommonUtils-CommonUtils.html">CommonUtils</a></li><li><a href="module-util_StringUtils-StringUtils.html">StringUtils</a></li><li><a href="World.World.html">World</a></li></ul><h3>Namespaces</h3><ul><li><a href="module-core_Math-Math.html">Math</a></li></ul>
</nav>

<div id="main">
    <h1 class="page-title">Source: component/RigidBody.js</h1>
    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>define(
  [ 'component/Base', 'lib/Box2d' ], function( Base, _Box2d ) {

    /**
     * Component used for interaction with the {@link https://github.com/kripken/box2d.js/|box2d.js Emscripten port}. &lt;br>
     * &lt;br>
     * Box2D has been tuned to work well with moving objects between 0.1 and 10 meters.
     * So this means objects between soup cans and buses in size should work well.
     * Static objects may be up to 50 meters big without too much trouble.
     * Box2D is tuned for meters, kilograms, and seconds.
     *
     * @param {Number} conversionFactor - Multiplies the position from physics world (meters) to screen coordinates (pixels). Defaults to 1 (probably not what you expect).
     * @param {b2BodyDef} bodyDef - Box2D physics body definition
     * @param {b2FixtureDef} materialDef - Box2D physics material definition
     * @extends {module:component/Base}
     * @exports component/RigidBody
     */

    // [ b2BodyDef ] http://www.box2dflash.org/docs/2.1a/reference/Box2D/Dynamics/b2BodyDef.html
    // [ b2FixtureDef ] http://www.box2dflash.org/docs/2.1a/reference/Box2D/Dynamics/b2FixtureDef.html

    var RigidBody = function( conversionFactor, bodyDef, materialDef ) {
      Base.call( this, Base.TYPE.RIGID_BODY );

      this.conversionFactor = ( conversionFactor ) ? conversionFactor : 1;
      this.bodyDef = ( bodyDef ) ? bodyDef : new Box2D.b2BodyDef();
      this.materialDef = ( materialDef ) ? materialDef : new Box2D.b2FixtureDef();

      this.body = null;
    };

    RigidBody.prototype = Object.create( Base.prototype );

    /**
     * Enumeration of rigid body types.
     * @type {Number}
     * @enum
     */
    RigidBody.TYPE = {
      /** A &lt;b>static body&lt;/b> is a body which isn’t affected by world forces it does not react to collisions. It can’t be moved. */
      STATIC: 1,
      /** A &lt;b>kinematic body&lt;/b> is an hybrid body which is not affected by forces and collisions like a static body but can moved with a linear velocity like a dynamic body. */
      KINEMATIC: 2,
      /** A &lt;b>dynamic body&lt;/b> is a body which is affected by world forces and react to collisions. */
      DYNAMIC: 3
    };

    /**
     * Sets the density of the material.
     * @param {number} density - Density in kg/m^2
     */
    RigidBody.prototype.setDensity = function( density ) {
      this.materialDef.set_density( density );
    };

    /**
     * Sets the friction of the material.
     * @param {number} friction - Usually in the range [0,1]
     */
    RigidBody.prototype.setFriction = function( friction ) {
      this.materialDef.set_friction( friction );
    };

    /**
     * Sets the bounciness of the material
     * @param {number} bounciness - Usually in the range [0,1]
     */
    RigidBody.prototype.setBounciness = function( bounciness ) {
      this.materialDef.set_restitution( bounciness );
    };

    /**
     * Sets the setPosition of the body, in the physics world, NOT in pixels or game world, a proper scale is required to draw.
     * @param {Number} x Coordinate X
     * @param {Number} y Coordinate Y
     */
    RigidBody.prototype.setPosition = function( x, y ) {
      this.bodyDef.get_position().set_x( x );
      this.bodyDef.get_position().set_y( y );
    };

    /**
     * Sets the angle (rotation) of the body.
     * @param {number} angle - Rotation angle in radians
     */
    RigidBody.prototype.setRotation = function( angle ) {
      this.bodyDef.angle.set_angle( angle );
    };

    /**
     * Sets geometrical shape of this RigidBody.
     * @param {b2Shape} shape - This is mandatory to use the component
     */
    RigidBody.prototype.setShape = function( shape ) {
      this.materialDef.set_shape( shape );
    };

    /**
     * Prevents the collision to be resolved by Box2D, but retains collision information.
     * @param {boolean} isSensor
     */
    RigidBody.prototype.setSensor = function( isSensor ) {
      this.materialDef.set_isSensor( isSensor );
    };

    /**
     * Prevents the collision to be resolved through other objects.
     * &lt;b>Expensive! Use with care.&lt;/b>
     * @param {boolean} preventTunneling
     */
    RigidBody.prototype.setPreventTunneling = function( preventTunneling ) {
      this.bodyDef.set_bullet( preventTunneling );
    };

    /**
     * Sets this body {@link module:component.RigidBody.TYPE|type}.
     * @param {module:component.RigidBody.TYPE} type - The body type
     */
    RigidBody.prototype.setType = function( type ) {
      switch( type ) {
        case RigidBody.TYPE.STATIC:
          this.bodyDef.set_type( Box2D.b2_staticBody );
          break;
        case RigidBody.TYPE.KINEMATIC:
          this.bodyDef.set_type( Box2D.b2_kinematicBody );
          break;
        case RigidBody.TYPE.DYNAMIC:
          this.bodyDef.set_type( Box2D.b2_dynamicBody );
          break;
        default:
          this.bodyDef.set_type( Box2D.b2_staticBody );
          break;
      }
    };

    /**
     * Prevents or allows the rotation on this RigidBody.
     * @param {boolean} allowRotation
     */
    RigidBody.prototype.setAllowRotation = function( allowRotation ) {
      this.bodyDef.set_fixedRotation( !allowRotation );
    };

    /**
     * Creates the fixture on the body of the physics world.
     */
    RigidBody.prototype.createFixture = function() {
      if( this.body &amp;&amp; this.materialDef ) {
        this.body.CreateFixture( this.materialDef );
      }
    };

    /**
     * Allows to store a data (in the means of a pointer) of an object to work with the internal memory of the Box2D.
     * It is (kinda) bugged on emscripten port, but can be {@link https://github.com/kripken/box2d.js/issues/35|worked around}.
     * @param {Object} userData
     */
    RigidBody.prototype.setUserData = function( userData ) {
      this.materialDef.set_userData( userData );
    };

    /**
     * Returns the Box2D.BodyDef from this component, null if not set.
     * @return {b2BodyDef} Body Definition from Box2D
     */
    RigidBody.prototype.getBodyDef = function() {
      return this.bodyDef;
    };

    /**
     * Returns the Material (Box2D.FixtureDef)from this component, null if not set.
     * @return {b2FixtureDef} Fixture Definition from Box2D
     */
    RigidBody.prototype.getMaterialDef = function() {
      return this.materialDef;
    };

    /**
     * Returns the Physics Body (Box2D.BodyDef) from this component, null if not set.
     * @return {b2Body} Body from Box2D
     */
    RigidBody.prototype.getPhysicsBody = function() {
      return this.body;
    };

    /**
     * Returns a new instance of a RigidBody with the same values.
     * @return {RigidBody} a clone of this RigidBody
     */
    RigidBody.prototype.clone = function() {
      return new RigidBody( this.conversionFactor, this.bodyDef, this.materialDef );
    };

    return RigidBody;
  }
);</code></pre>
        </article>
    </section>





    <footer>
        <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.4.0</a> | Sat Jun 04 2016 11:29:19 GMT-0300 (BRT)
    </footer>
</div>

<br class="clear">

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
